var Ye=Object.defineProperty;var Xe=(r,e,n)=>e in r?Ye(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var S=(r,e,n)=>(Xe(r,typeof e!="symbol"?e+"":e,n),n);import{d as Qe,_ as W}from"../static/preload-helper-D58fUZad.js";import{g as Te,c as q}from"../static/commonjsHelpers-DZNb-E5g.js";import{_ as Ze,e as J,a as er,b as rr,i as M,c as nr,d as xe,f as Y,g as Oe,h as tr,j as ir,k as sr,l as ar,m as or,n as cr,o as fr,p as lr,q as ur}from"../static/_arrayLikeKeys-cPmES6K-.js";import{p as vr}from"../static/picocolors.browser-DYEF1xzc.js";function R(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function oe(r,e){for(var n="",t=0,i=-1,o=0,s,a=0;a<=r.length;++a){if(a<r.length)s=r.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){c===-1?(n="",t=0):(n=n.slice(0,c),t=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length===2||n.length===1){n="",t=0,i=a,o=0;continue}}e&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+r.slice(i+1,a):n=r.slice(i+1,a),t=a-i-1;i=a,o=0}else s===46&&o!==-1?++o:o=-1}return n}function dr(r,e){var n=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+t:n+r+t:t}var U={resolve:function(){for(var e="",n=!1,t,i=arguments.length-1;i>=-1&&!n;i--){var o;i>=0?o=arguments[i]:(t===void 0&&(t=Qe.process.cwd()),o=t),R(o),o.length!==0&&(e=o+"/"+e,n=o.charCodeAt(0)===47)}return e=oe(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(R(e),e.length===0)return".";var n=e.charCodeAt(0)===47,t=e.charCodeAt(e.length-1)===47;return e=oe(e,!n),e.length===0&&!n&&(e="."),e.length>0&&t&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return R(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var t=arguments[n];R(t),t.length>0&&(e===void 0?e=t:e+="/"+t)}return e===void 0?".":U.normalize(e)},relative:function(e,n){if(R(e),R(n),e===n||(e=U.resolve(e),n=U.resolve(n),e===n))return"";for(var t=1;t<e.length&&e.charCodeAt(t)===47;++t);for(var i=e.length,o=i-t,s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var a=n.length,c=a-s,g=o<c?o:c,u=-1,v=0;v<=g;++v){if(v===g){if(c>g){if(n.charCodeAt(s+v)===47)return n.slice(s+v+1);if(v===0)return n.slice(s+v)}else o>g&&(e.charCodeAt(t+v)===47?u=v:v===0&&(u=0));break}var $=e.charCodeAt(t+v),j=n.charCodeAt(s+v);if($!==j)break;$===47&&(u=v)}var P="";for(v=t+u+1;v<=i;++v)(v===i||e.charCodeAt(v)===47)&&(P.length===0?P+="..":P+="/..");return P.length>0?P+n.slice(s+u):(s+=u,n.charCodeAt(s)===47&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(R(e),e.length===0)return".";for(var n=e.charCodeAt(0),t=n===47,i=-1,o=!0,s=e.length-1;s>=1;--s)if(n=e.charCodeAt(s),n===47){if(!o){i=s;break}}else o=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');R(e);var t=0,i=-1,o=!0,s;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(s=e.length-1;s>=0;--s){var g=e.charCodeAt(s);if(g===47){if(!o){t=s+1;break}}else c===-1&&(o=!1,c=s+1),a>=0&&(g===n.charCodeAt(a)?--a===-1&&(i=s):(a=-1,i=c))}return t===i?i=c:i===-1&&(i=e.length),e.slice(t,i)}else{for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!o){t=s+1;break}}else i===-1&&(o=!1,i=s+1);return i===-1?"":e.slice(t,i)}},extname:function(e){R(e);for(var n=-1,t=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!o){t=a+1;break}continue}i===-1&&(o=!1,i=a+1),c===46?n===-1?n=a:s!==1&&(s=1):n!==-1&&(s=-1)}return n===-1||i===-1||s===0||s===1&&n===i-1&&n===t+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return dr("/",e)},parse:function(e){R(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var t=e.charCodeAt(0),i=t===47,o;i?(n.root="/",o=1):o=0;for(var s=-1,a=0,c=-1,g=!0,u=e.length-1,v=0;u>=o;--u){if(t=e.charCodeAt(u),t===47){if(!g){a=u+1;break}continue}c===-1&&(g=!1,c=u+1),t===46?s===-1?s=u:v!==1&&(v=1):s!==-1&&(v=-1)}return s===-1||c===-1||v===0||v===1&&s===c-1&&s===a+1?c!==-1&&(a===0&&i?n.base=n.name=e.slice(1,c):n.base=n.name=e.slice(a,c)):(a===0&&i?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};U.posix=U;var gr=U;const w=Te(gr);var hr=Ze,pr=function(){try{var r=hr(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Ce=pr,ce=Ce;function mr(r,e,n){e=="__proto__"&&ce?ce(r,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[e]=n}var X=mr,br=X,yr=J;function wr(r,e,n){(n!==void 0&&!yr(r[e],n)||n===void 0&&!(e in r))&&br(r,e,n)}var Se=wr;function _r(r){return function(e,n,t){for(var i=-1,o=Object(e),s=t(e),a=s.length;a--;){var c=s[r?a:++i];if(n(o[c],c,o)===!1)break}return e}}var Ar=_r,$r=Ar,Pr=$r(),Tr=Pr,H={exports:{}};H.exports;(function(r,e){var n=er,t=e&&!e.nodeType&&e,i=t&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===t,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(g,u){if(u)return g.slice();var v=g.length,$=a?a(v):new g.constructor(v);return g.copy($),$}r.exports=c})(H,H.exports);var xr=H.exports,fe=rr;function Or(r){var e=new r.constructor(r.byteLength);return new fe(e).set(new fe(r)),e}var Cr=Or,Sr=Cr;function Rr(r,e){var n=e?Sr(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}var Fr=Rr;function jr(r,e){var n=-1,t=r.length;for(e||(e=Array(t));++n<t;)e[n]=r[n];return e}var Lr=jr,Er=M,le=Object.create,Ir=function(){function r(){}return function(e){if(!Er(e))return{};if(le)return le(e);r.prototype=e;var n=new r;return r.prototype=void 0,n}}(),Dr=Ir,Ur=nr,Br=Ur(Object.getPrototypeOf,Object),Re=Br,Mr=Dr,Vr=Re,Hr=xe;function Nr(r){return typeof r.constructor=="function"&&!Hr(r)?Mr(Vr(r)):{}}var kr=Nr,Gr=Y,Kr=Oe;function qr(r){return Kr(r)&&Gr(r)}var zr=qr,Wr=tr,Jr=Re,Yr=Oe,Xr="[object Object]",Qr=Function.prototype,Zr=Object.prototype,Fe=Qr.toString,en=Zr.hasOwnProperty,rn=Fe.call(Object);function nn(r){if(!Yr(r)||Wr(r)!=Xr)return!1;var e=Jr(r);if(e===null)return!0;var n=en.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Fe.call(n)==rn}var tn=nn;function sn(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var je=sn,an=X,on=J,cn=Object.prototype,fn=cn.hasOwnProperty;function ln(r,e,n){var t=r[e];(!(fn.call(r,e)&&on(t,n))||n===void 0&&!(e in r))&&an(r,e,n)}var un=ln,vn=un,dn=X;function gn(r,e,n,t){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=t?t(n[a],r[a],a,n,r):void 0;c===void 0&&(c=r[a]),i?dn(n,a,c):vn(n,a,c)}return n}var hn=gn;function pn(r){var e=[];if(r!=null)for(var n in Object(r))e.push(n);return e}var mn=pn,bn=M,yn=xe,wn=mn,_n=Object.prototype,An=_n.hasOwnProperty;function $n(r){if(!bn(r))return wn(r);var e=yn(r),n=[];for(var t in r)t=="constructor"&&(e||!An.call(r,t))||n.push(t);return n}var Pn=$n,Tn=ir,xn=Pn,On=Y;function Cn(r){return On(r)?Tn(r,!0):xn(r)}var Le=Cn,Sn=hn,Rn=Le;function Fn(r){return Sn(r,Rn(r))}var jn=Fn,ue=Se,Ln=xr,En=Fr,In=Lr,Dn=kr,ve=sr,de=ar,Un=zr,Bn=or,Mn=cr,Vn=M,Hn=tn,Nn=fr,ge=je,kn=jn;function Gn(r,e,n,t,i,o,s){var a=ge(r,n),c=ge(e,n),g=s.get(c);if(g){ue(r,n,g);return}var u=o?o(a,c,n+"",r,e,s):void 0,v=u===void 0;if(v){var $=de(c),j=!$&&Bn(c),P=!$&&!j&&Nn(c);u=c,$||j||P?de(a)?u=a:Un(a)?u=In(a):j?(v=!1,u=Ln(c,!0)):P?(v=!1,u=En(c,!0)):u=[]:Hn(c)||ve(c)?(u=a,ve(a)?u=kn(a):(!Vn(a)||Mn(a))&&(u=Dn(c))):v=!1}v&&(s.set(c,u),i(u,c,t,o,s),s.delete(c)),ue(r,n,u)}var Kn=Gn,qn=lr,zn=Se,Wn=Tr,Jn=Kn,Yn=M,Xn=Le,Qn=je;function Ee(r,e,n,t,i){r!==e&&Wn(e,function(o,s){if(i||(i=new qn),Yn(o))Jn(r,e,s,n,Ee,t,i);else{var a=t?t(Qn(r,s),o,s+"",r,e,i):void 0;a===void 0&&(a=o),zn(r,s,a)}},Xn)}var Zn=Ee;function et(r){return r}var Ie=et;function rt(r,e,n){switch(n.length){case 0:return r.call(e);case 1:return r.call(e,n[0]);case 2:return r.call(e,n[0],n[1]);case 3:return r.call(e,n[0],n[1],n[2])}return r.apply(e,n)}var nt=rt,tt=nt,he=Math.max;function it(r,e,n){return e=he(e===void 0?r.length-1:e,0),function(){for(var t=arguments,i=-1,o=he(t.length-e,0),s=Array(o);++i<o;)s[i]=t[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=t[i];return a[e]=n(s),tt(r,this,a)}}var st=it;function at(r){return function(){return r}}var ot=at,ct=ot,pe=Ce,ft=Ie,lt=pe?function(r,e){return pe(r,"toString",{configurable:!0,enumerable:!1,value:ct(e),writable:!0})}:ft,ut=lt,vt=800,dt=16,gt=Date.now;function ht(r){var e=0,n=0;return function(){var t=gt(),i=dt-(t-n);if(n=t,i>0){if(++e>=vt)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var pt=ht,mt=ut,bt=pt,yt=bt(mt),wt=yt,_t=Ie,At=st,$t=wt;function Pt(r,e){return $t(At(r,e,_t),r+"")}var Tt=Pt,xt=J,Ot=Y,Ct=ur,St=M;function Rt(r,e,n){if(!St(n))return!1;var t=typeof e;return(t=="number"?Ot(n)&&Ct(e,n.length):t=="string"&&e in n)?xt(n[e],r):!1}var Ft=Rt,jt=Tt,Lt=Ft;function Et(r){return jt(function(e,n){var t=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=r.length>3&&typeof o=="function"?(i--,o):void 0,s&&Lt(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++t<i;){var a=n[t];a&&r(e,a,t,o)}return e})}var It=Et,Dt=Zn,Ut=It,Bt=Ut(function(r,e,n){Dt(r,e,n)}),Mt=Bt;const me=Te(Mt);class D{constructor(e){S(this,"path");S(this,"getRelativePath",e=>w.join(".",w.relative(this.path,e)));S(this,"getAbsolutePath",()=>w.resolve(this.path));this.path=e}}var N={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */N.exports;(function(r,e){(function(n){var t=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,o=typeof q=="object"&&q;(o.global===o||o.window===o||o.self===o)&&(n=o);var s,a=2147483647,c=36,g=1,u=26,v=38,$=700,j=72,P=128,Q="-",ke=/^xn--/,Ge=/[^\x20-\x7E]/,Ke=/[\x2E\u3002\uFF0E\uFF61]/g,qe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=c-g,O=Math.floor,B=String.fromCharCode,V;function E(f){throw new RangeError(qe[f])}function Z(f,l){for(var d=f.length,h=[];d--;)h[d]=l(f[d]);return h}function ee(f,l){var d=f.split("@"),h="";d.length>1&&(h=d[0]+"@",f=d[1]),f=f.replace(Ke,".");var p=f.split("."),y=Z(p,l).join(".");return h+y}function re(f){for(var l=[],d=0,h=f.length,p,y;d<h;)p=f.charCodeAt(d++),p>=55296&&p<=56319&&d<h?(y=f.charCodeAt(d++),(y&64512)==56320?l.push(((p&1023)<<10)+(y&1023)+65536):(l.push(p),d--)):l.push(p);return l}function ne(f){return Z(f,function(l){var d="";return l>65535&&(l-=65536,d+=B(l>>>10&1023|55296),l=56320|l&1023),d+=B(l),d}).join("")}function ze(f){return f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c}function te(f,l){return f+22+75*(f<26)-((l!=0)<<5)}function ie(f,l,d){var h=0;for(f=d?O(f/$):f>>1,f+=O(f/l);f>G*u>>1;h+=c)f=O(f/G);return O(h+(G+1)*f/(f+v))}function se(f){var l=[],d=f.length,h,p=0,y=P,m=j,_,T,C,F,b,A,x,L,I;for(_=f.lastIndexOf(Q),_<0&&(_=0),T=0;T<_;++T)f.charCodeAt(T)>=128&&E("not-basic"),l.push(f.charCodeAt(T));for(C=_>0?_+1:0;C<d;){for(F=p,b=1,A=c;C>=d&&E("invalid-input"),x=ze(f.charCodeAt(C++)),(x>=c||x>O((a-p)/b))&&E("overflow"),p+=x*b,L=A<=m?g:A>=m+u?u:A-m,!(x<L);A+=c)I=c-L,b>O(a/I)&&E("overflow"),b*=I;h=l.length+1,m=ie(p-F,h,F==0),O(p/h)>a-y&&E("overflow"),y+=O(p/h),p%=h,l.splice(p++,0,y)}return ne(l)}function ae(f){var l,d,h,p,y,m,_,T,C,F,b,A=[],x,L,I,K;for(f=re(f),x=f.length,l=P,d=0,y=j,m=0;m<x;++m)b=f[m],b<128&&A.push(B(b));for(h=p=A.length,p&&A.push(Q);h<x;){for(_=a,m=0;m<x;++m)b=f[m],b>=l&&b<_&&(_=b);for(L=h+1,_-l>O((a-d)/L)&&E("overflow"),d+=(_-l)*L,l=_,m=0;m<x;++m)if(b=f[m],b<l&&++d>a&&E("overflow"),b==l){for(T=d,C=c;F=C<=y?g:C>=y+u?u:C-y,!(T<F);C+=c)K=T-F,I=c-F,A.push(B(te(F+K%I,0))),T=O(K/I);A.push(B(te(T,0))),y=ie(d,L,h==p),d=0,++h}++d,++l}return A.join("")}function We(f){return ee(f,function(l){return ke.test(l)?se(l.slice(4).toLowerCase()):l})}function Je(f){return ee(f,function(l){return Ge.test(l)?"xn--"+ae(l):l})}if(s={version:"1.4.1",ucs2:{decode:re,encode:ne},decode:se,encode:ae,toASCII:Je,toUnicode:We},t&&i)if(r.exports==t)i.exports=s;else for(V in s)s.hasOwnProperty(V)&&(t[V]=s[V]);else n.punycode=s})(q)})(N,N.exports);N.exports;function Vt(r,e){for(var n=0,t=r.length-1;t>=0;t--){var i=r[t];i==="."?r.splice(t,1):i===".."?(r.splice(t,1),n++):n&&(r.splice(t,1),n--)}if(e)for(;n--;n)r.unshift("..");return r}function Ht(){for(var r="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var t=n>=0?arguments[n]:"/";if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)continue;r=t+"/"+r,e=t.charAt(0)==="/"}return r=Vt(Nt(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function Nt(r,e){if(r.filter)return r.filter(e);for(var n=[],t=0;t<r.length;t++)e(r[t],t,r)&&n.push(r[t]);return n}var De=function(r){function e(){var t=this||self;return delete r.prototype.__magic__,t}if(typeof globalThis=="object")return globalThis;if(this)return e();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:e});var n=__magic__;return n}(Object),kt=De.URL;De.URLSearchParams;var Gt=/%/g,Kt=/\\/g,qt=/\n/g,zt=/\r/g,Wt=/\t/g,Jt=47;function Yt(r){return r.includes("%")&&(r=r.replace(Gt,"%25")),r.includes("\\")&&(r=r.replace(Kt,"%5C")),r.includes(`
`)&&(r=r.replace(qt,"%0A")),r.includes("\r")&&(r=r.replace(zt,"%0D")),r.includes("	")&&(r=r.replace(Wt,"%09")),r}var Ue=function(e){var n=new kt("file://"),t=Ht(e),i=e.charCodeAt(e.length-1);return i===Jt&&t[t.length-1]!=="/"&&(t+="/"),n.pathname=Yt(t),n};const Be=async r=>await W(()=>import(r),[]),Xt=async(r,e)=>{var i;return e===""?r:((i=(await Be(Ue(e).toString())).default.build)==null?void 0:i.assetsDir)??r},Qt=async(r,e)=>e===""?r:(await Be(Ue(e).toString())).default.publicDir||r,Me="assets",Ve="public",be={rootFolders:{source:"src",dist:"dist",sitesConfig:"sites-config",functions:"functions"},subfolders:{templates:"templates",serverlessFunctions:"functions",assets:Me,public:Ve,clientBundle:"client",serverBundle:"server",renderBundle:"render",renderer:"renderer",static:"static",plugin:"plugin"},sitesConfigFiles:{ci:"ci.json",features:"features.json",siteStream:"site-stream.json",serving:"serving.json",sitemap:"sitemap.json",redirects:"redirects.csv",auth:"auth.json"},distConfigFiles:{templates:"templates.json",artifacts:"artifacts.json",functionMetadata:"functionMetadata.json"},rootFiles:{config:"config.yaml"},envVarConfig:{envVarDir:"",envVarPrefix:"YEXT_PUBLIC"}},k=class k{constructor(e){S(this,"config");S(this,"getTemplatePaths",()=>{const e=w.join(this.config.rootFolders.source,this.config.subfolders.templates);return this.config.scope?[new D(w.join(e,this.config.scope)),new D(e)]:[new D(e)]});S(this,"getSitesConfigPath",()=>new D(w.join(this.config.rootFolders.sitesConfig,this.config.scope??"")));S(this,"getScopedDistPath",()=>new D(w.join(this.config.rootFolders.dist,this.config.scope??"")));S(this,"getConfigYamlPath",()=>new D(w.join(this.config.scope??"",this.config.rootFiles.config)));const n=me(be,e);this.config=n}};S(k,"init",async e=>{const n=me(be,e),t=await Xt(Me,w.resolve("vite.config.js"));n.subfolders.assets=t;const i=await Qt(Ve,w.resolve("vite.config.js"));return n.subfolders.public=i,new k(n)});let z=k;const Zt=r=>{const e=r.split("/");return e.pop(),e.map(()=>"../").reduce((n,t)=>n+t,"")},ye=r=>r.split(w.sep).join(w.posix.sep),ei=r=>`<title>${r.title?r.title:"Yext Pages Site"}</title>
    <meta charset="${r.charset||"UTF-8"}">
    <meta name="viewport" content="${r.viewport||"width=device-width, initial-scale=1"}">
    ${r.tags?r.tags.map(ri).join(`
`):""}
    ${r.other?r.other:""}`.split(`
`).filter(e=>e.trim()!="").join(`
`),ri=r=>{switch(r.type){case"base":case"link":case"meta":return`<${r.type} ${we(r.attributes)}>`;case"style":case"script":case"noscript":case"template":return`<${r.type} ${we(r.attributes)}></${r.type}>`;default:return console.log(vr.yellow(`[WARNING]: Tag type ${r.type} is unsupported by the Tag interface. Please use "other" to render this tag.`)),""}},we=r=>Object.keys(r).map(e=>`${e}="${r[e]}"`).join(" "),ni=(r,e)=>{var n,t;return r!=null&&r.lang?r.lang:(n=e==null?void 0:e.document)!=null&&n.locale?(t=e==null?void 0:e.document)==null?void 0:t.locale:"en"},ti=(r,e,n)=>{const t=_e(ye(e)),i=_e(ye(r));return`
        const componentURL = new URL("${t}", import.meta.url)
        const component = await import(componentURL);

        const renderURL = new URL("${i}", import.meta.url)
        const render = await import(renderURL);

        render.render(
        {
            Page: component.default,
            pageProps: ${ii(n)},
        }
        );
    `},ii=r=>`JSON.parse(decodeURIComponent("${encodeURIComponent(JSON.stringify(r))}"))`,_e=r=>r.startsWith("/")?r:"/"+r,si=(r,e,n,t)=>(e=e.replace("<!--app-lang-->",n),r&&(e=fi(e,`<script type="module">${r}<\/script>`)),t&&(e=Ne(e,ei(t))),e),ai=(r,e,n,t,i,o)=>{let s=si(r,e,i,o);return s=Ne(s,oi(n,t)),s},oi=(r,e)=>Array.from(He(r,e,new Set)).map(n=>`<link rel="stylesheet" href="/${n}"/>`).join(`
`),He=(r,e,n)=>{const t=structuredClone(Object.entries(e).find(([a])=>a===r));if(!t)return new Set;const[i,o]=t;n.add(i);const s=new Set(o.css);return(o.imports||[]).flatMap(a=>Array.from(He(a,e,n))).forEach(a=>s.add(a)),s},Ae="<head>",Ne=(r,e)=>{let n=r.indexOf(Ae);if(n===-1)throw new Error("_server.tsx: No head tag is defined");return n+=Ae.length,r.slice(0,n)+e+r.slice(n)},ci="</head>",fi=(r,e)=>{const n=r.indexOf(ci);if(n===-1)throw new Error("_server.tsx: No head tag is defined");return r.slice(0,n)+e+r.slice(n)},li=async(r,e,n,t,i,o)=>{if(!i)throw new Error("Manifest is undefined");const s=e.getHeadConfig?e.getHeadConfig(r):void 0,a=w.join(o.getTemplatePaths()[0].path,`${e.templateName}.tsx`);let c;n&&(c=ti(t.client,i.clientPaths[e.templateName],r));const g=await t.server.render({Page:e.default,pageProps:r}),u=t.server.indexHtml.replace(t.server.replacementTag,g);return ai(c,u,a,i.bundlerManifest,ni(s,r),s)},ui=r=>{if(vi(r.filename,r.config),!r.getPath)throw new Error(`Template ${r.filename} is missing an exported getPath function.`);if(!r.default&&!r.render)throw new Error(`Template ${r.filename} does not have the necessary exports to produce page. A module should either have a React component as a default export or a render function.`)},vi=(r,e)=>{if(!e.name)throw new Error(`Template ${r} is missing a "name" in the config function.`);if(e.streamId&&e.stream)throw new Error(`Template ${r} must not define both a "streamId" and a "stream".`)},di=(r,e)=>{let n=r.split(w.sep)[r.split(w.sep).length-1];const t=n.slice(n.lastIndexOf("."));let i=n.slice(0,n.lastIndexOf("."));return e&&(n=n.split(t)[0].slice(0,n.split(t)[0].lastIndexOf("."))+t,i=i.slice(0,i.lastIndexOf("."))),{base:n,name:i}},gi=(r,e)=>!r&&(!e||!e.$id),hi=(r,e,n)=>{const t=di(r,n),i={...e,config:pi(t.name,e.config),path:r,filename:t.base,templateName:t.name};return ui(i),i},pi=(r,e)=>{const n=mi(e==null?void 0:e.stream);return{name:(e==null?void 0:e.name)??r,hydrate:(e==null?void 0:e.hydrate)??!0,...e,stream:n,templateType:gi(e==null?void 0:e.streamId,n)?"static":"entity"}},mi=r=>{if(r)return r.localization.locales&&r.localization.locales.length>0?{...r,localization:{locales:r.localization.locales,primary:!1}}:{...r,localization:{primary:!0}}},bi=(r,e)=>{if(!r||typeof r!="string")throw new Error(`getPath does not return a valid string in template '${e}'`)},$e=new Map,yi=async(r,e,n)=>{const t=e.serverPaths[r].replace(n.config.subfolders.assets,"..");if(!t)throw new Error(`Could not find path for feature ${r}`);let i=$e.get(t);return i||(i=await W(()=>import(t),[]),$e.set(t,i)),hi(t,i,!0)},wi=async(r,e)=>{const n=r.renderPaths._server.replace(e.config.subfolders.assets,"..");return{server:await _i(n),client:r.renderPaths._client}},Pe=new Map,_i=async r=>{let e=Pe.get(r);return e||(e=await W(()=>import(r),[]),Pe.set(r,e)),e},Ai=async(r,e,n,t,i)=>{var g;r.transformProps&&(e=await r.transformProps(e));const o=r.getPath(e);bi(o,r.templateName);const s=e.pathOverride??o,a={...e,path:o,relativePrefixToRoot:Zt(s)};return{content:await $i(r,a,n,t,i),path:o,redirects:((g=r.getRedirects)==null?void 0:g.call(r,a))??[]}},$i=async(r,e,n,t,i)=>{const{default:o,render:s,getHeadConfig:a}=r;if(!o&&!s)throw new Error(`Cannot render html from template '${r.config.name}'. Template is missing render function or default export.`);return s?(a&&console.warn(`getHeadConfig for template ${r.config.name} will not be called since a custom render function is defined.`),s(e)):await li(e,r,r.config.hydrate,n,t,i)};var Si=async(r,e)=>{const n=new z(e.projectStructure),t=await yi(r.document.__.name,e,n),i=await wi(e,n);return await Ai(t,r,i,e,n)};export{Si as default};
