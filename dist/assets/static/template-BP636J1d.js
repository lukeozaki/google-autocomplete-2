import{j as o,m as it,c as lt,y as ct,b as ut,g as dt}from"./env-Dm6p1yuU.js";import{r as u,R as ft}from"./index-lJc2iZZr.js";import{u as M,e as Me,a as De,d as $e,b as Be,c as q,f as he,G as pt,g as ht,h as mt,i as xt,L as gt,S as vt}from"./GooglePredictionsBox-CX2Rgq_A.js";import{r as yt}from"./index-29uReCQH.js";import{u as me}from"./useBreakpoints-BSg0d5kC.js";import{r as bt,d as K,G as Ct,u as He,a as wt,D as St,c as G,k as Ve,S as jt,f as Nt,h as It,M as Et,e as Ft}from"./getMapKey-BDZ5f-6f.js";function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},te.apply(this,arguments)}var U;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(U||(U={}));var Ie=function(e){return e},Ee="beforeunload",_t="popstate";function Pt(e){e===void 0&&(e={});var t=e,n=t.window,s=n===void 0?document.defaultView:n,a=s.history;function r(){var x=s.location,y=x.pathname,I=x.search,S=x.hash,k=a.state||{};return[k.idx,Ie({pathname:y,search:I,hash:S,state:k.usr||null,key:k.key||"default"})]}var i=null;function c(){if(i)p.call(i),i=null;else{var x=U.Pop,y=r(),I=y[0],S=y[1];if(p.length){if(I!=null){var k=f-I;k&&(i={action:x,location:S,retry:function(){F(k*-1)}},F(k))}}else j(x)}}s.addEventListener(_t,c);var l=U.Pop,d=r(),f=d[0],m=d[1],g=_e(),p=_e();f==null&&(f=0,a.replaceState(te({},a.state,{idx:f}),""));function v(x){return typeof x=="string"?x:Rt(x)}function h(x,y){return y===void 0&&(y=null),Ie(te({pathname:m.pathname,hash:"",search:""},typeof x=="string"?ne(x):x,{state:y,key:kt()}))}function b(x,y){return[{usr:x.state,key:x.key,idx:y},v(x)]}function _(x,y,I){return!p.length||(p.call({action:x,location:y,retry:I}),!1)}function j(x){l=x;var y=r();f=y[0],m=y[1],g.call({action:l,location:m})}function N(x,y){var I=U.Push,S=h(x,y);function k(){N(x,y)}if(_(I,S,k)){var C=b(S,f+1),T=C[0],L=C[1];try{a.pushState(T,"",L)}catch{s.location.assign(L)}j(I)}}function E(x,y){var I=U.Replace,S=h(x,y);function k(){E(x,y)}if(_(I,S,k)){var C=b(S,f),T=C[0],L=C[1];a.replaceState(T,"",L),j(I)}}function F(x){a.go(x)}var P={get action(){return l},get location(){return m},createHref:v,push:N,replace:E,go:F,back:function(){F(-1)},forward:function(){F(1)},listen:function(y){return g.push(y)},block:function(y){var I=p.push(y);return p.length===1&&s.addEventListener(Ee,Fe),function(){I(),p.length||s.removeEventListener(Ee,Fe)}}};return P}function Fe(e){e.preventDefault(),e.returnValue=""}function _e(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(s){return s!==n})}},call:function(n){e.forEach(function(s){return s&&s(n)})}}}function kt(){return Math.random().toString(36).substr(2,8)}function Rt(e){var t=e.pathname,n=t===void 0?"/":t,s=e.search,a=s===void 0?"":s,r=e.hash,i=r===void 0?"":r;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function ne(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ue=u.createContext(null),xe=u.createContext(null),Tt=u.createContext({outlet:null,matches:[]});function ge(e,t){if(!e)throw new Error(t)}function At(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?ne(e):e;return{pathname:n?n.startsWith("/")?n:Lt(n,t):t,search:Bt(s),hash:Ht(a)}}function Lt(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Ot(e,t,n){let s=typeof e=="string"?ne(e):e,a=e===""||s.pathname===""?"/":s.pathname,r;if(a==null)r=n;else{let c=t.length-1;if(a.startsWith("..")){let l=a.split("/");for(;l[0]==="..";)l.shift(),c-=1;s.pathname=l.join("/")}r=c>=0?t[c]:"/"}let i=At(s,r);return a&&a!=="/"&&a.endsWith("/")&&!i.pathname.endsWith("/")&&(i.pathname+="/"),i}function Mt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const Dt=e=>e.join("/").replace(/\/\/+/g,"/"),$t=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Bt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ht=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ve(){return u.useContext(xe)!=null}function ye(){return ve()||ge(!1),u.useContext(xe).location}function Vt(){ve()||ge(!1);let{basename:e,navigator:t}=u.useContext(Ue),{matches:n}=u.useContext(Tt),{pathname:s}=ye(),a=JSON.stringify(n.map(c=>c.pathnameBase)),r=u.useRef(!1);return u.useEffect(()=>{r.current=!0}),u.useCallback(function(c,l){if(l===void 0&&(l={}),!r.current)return;if(typeof c=="number"){t.go(c);return}let d=Ot(c,JSON.parse(a),s);e!=="/"&&(d.pathname=Dt([e,d.pathname])),(l.replace?t.replace:t.push)(d,l.state)},[e,t,a,s])}function Ut(e){let{basename:t="/",children:n=null,location:s,navigationType:a=U.Pop,navigator:r,static:i=!1}=e;ve()&&ge(!1);let c=$t(t),l=u.useMemo(()=>({basename:c,navigator:r,static:i}),[c,r,i]);typeof s=="string"&&(s=ne(s));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:p="default"}=s,v=u.useMemo(()=>{let h=Mt(d,c);return h==null?null:{pathname:h,search:f,hash:m,state:g,key:p}},[c,d,f,m,g,p]);return v==null?null:u.createElement(Ue.Provider,{value:l},u.createElement(xe.Provider,{children:n,value:{location:v,navigationType:a}}))}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gt(e){let{basename:t,children:n,window:s}=e,a=u.useRef();a.current==null&&(a.current=Pt({window:s}));let r=a.current,[i,c]=u.useState({action:r.action,location:r.location});return u.useLayoutEffect(()=>r.listen(c),[r]),u.createElement(Ut,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:r})}function be(e){let t=u.useRef(le(e)),n=ye(),s=u.useMemo(()=>{let i=le(n.search);for(let c of t.current.keys())i.has(c)||t.current.getAll(c).forEach(l=>{i.append(c,l)});return i},[n.search]),a=Vt(),r=u.useCallback((i,c)=>{a("?"+le(i),c)},[a]);return[s,r]}function le(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function zt(e,t){const[n,s]=be(),a=M();u.useEffect(()=>{if(e)return;async function r(){const i=await $e(n,a),c=Be(n);if(i){a.setStaticFilters([i]),a.setFacets(c);try{await a.executeVerticalQuery()}catch(l){console.error(l)}}t&&t()}r()},[a,n,s,e,t])}function qt(e){const t=M(),[n,s]=be();u.useEffect(()=>{var c,l;if(!e)return;const a=Me(((c=t.state.filters)==null?void 0:c.static)||[]),r=De(((l=t.state.filters)==null?void 0:l.facets)||[]);let i="";a&&(i+=a.toString(),r&&(i+=`&${r.toString()}`)),i!==n.toString()&&s(i)},[t.state.filters,e])}function Kt(){const e=M(),[t,n]=be(),s=ye();u.useEffect(()=>{var f;async function a(){const m=await $e(t,e),g=Be(t);if(m){e.setStaticFilters([m]),e.setFacets(g);try{await e.executeVerticalQuery()}catch(p){console.error(p)}}else e.setStaticFilters([]),e.setFacets([]),e.setState({...e.state,vertical:{...e.state.vertical,results:void 0},query:{}})}let r=!1;const i=t.get("facets"),c=new URLSearchParams(t);c.delete("facets");const l=Me(((f=e.state.filters)==null?void 0:f.static)||[])??new URLSearchParams;(l==null?void 0:l.toString())!==c.toString()&&(r=!0),(De(e.state.filters.facets||[])??new URLSearchParams).get("facets")!==i&&(r=!0),r&&a()},[s])}async function Wt(e,t,n=1/0){async function s(d){return await e.verticalSearch({query:"",verticalKey:t,limit:Math.min(n,50),offset:d,retrieveFacets:!1,skipSpellCheck:!0})}const a=await s(0),r=[Promise.resolve(a)],i=50,c=Math.min(a.verticalResults.resultsCount,n);for(let d=a.verticalResults.results.length;d<c;d+=i)r.push(s(d));const l=[];return await Promise.all(r).then(d=>{for(const f of d)l.push(...f.verticalResults.results)}),l}function Yt(e,t,n){var g;const[s,a]=u.useState([]),r=M(),i=q(p=>p),c=!i.query.queryId;u.useEffect(()=>{if(!t||!i.vertical.verticalKey)return;async function p(){const v=await Wt(r.core,i.vertical.verticalKey);a(v),n&&n()}p()},[]);const l=q(p=>p.vertical),d=l.results,f=(g=l==null?void 0:l.noResults)==null?void 0:g.allResultsForVertical.results;return c&&t?s:d!=null&&d.length?d:e?f:[]}const[W,Jt]=bt("Attempted to call useLocator outside of LocatorProvider"),Xt=()=>{const e=M(),{mapRefCur:t}=W(),n=u.useRef(null),s=u.useRef(null),a=u.useRef(null);u.useEffect(()=>{c()},[]);const r=async(l,d,f)=>{if(console.log(l,d,f),d){e.setUserLocation({latitude:d,longitude:f});const m={displayName:l,selected:!0,filter:{kind:"fieldValue",fieldId:"builtin.location",matcher:K.Near,value:{lat:d,lng:f,radius:1609*Ct}}};e.setStaticFilters([m]),e.setOffset(0),e.resetFacets(),await he(e)}};function i(l,d,f=!1){let m;return function(){const g=this,p=arguments,v=function(){m=null,f||l.apply(g,p)},h=f&&!m;clearTimeout(m),m=setTimeout(v,d),h&&l.apply(g,p)}}const c=()=>{var v;const l=s.current;window.google&&new window.google.maps.places.AutocompleteService;const d=(v=t==null?void 0:t._map)==null?void 0:v.map,f=new google.maps.places.PlacesService(d),m=h=>{const b=YEXT_PUBLIC_LIVE_API_KEY,_=YEXT_PUBLIC_MAX_LIVE_API_SUGGESTION,j=YEXT_PUBLIC_LIVE_API_ENTITY_TYPES,N=YEXT_PUBLIC_SAVED_FILTER_ID,E=`https://sbx-cdn.yextapis.com/v2/accounts/me/entities?api_key=${b}&v=20240306&entityTypes=${j}&filter={$or:[{name:{$contains:"${h}"}}]}&fields=name,yextDisplayCoordinate,googlePlaceId&savedFilterIds=${N}&limit=${_}`,F=window.google?new window.google.maps.places.AutocompleteService:"";return Promise.all([fetch(E,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json"}}).then(P=>P.json()).then(P=>P.response.entities.map(x=>({description:x.name,types:[],yextDisplayCoordinate:x.yextDisplayCoordinate,googlePlceId:x.googlePlceId}))),new Promise((P,x)=>{F.getPlacePredictions({input:h},(y,I)=>{if(I!=window.google.maps.places.PlacesServiceStatus.OK&&I!=window.google.maps.places.PlacesServiceStatus.ZERO_RESULTS){x(I);return}P(y||[])})})]).then(([P,x])=>{g(P,x)})},g=function(h,b){let _=[];if(console.log(h,b),h.forEach(function(j){const N=j.description,{latitude:E,longitude:F}=j.yextDisplayCoordinate,P=j.place_id??'""';_.push(`<li class="autocomplete-item" data-type="place" data-place-id=${P} data-yext-lat=${E} data-yext-lng=${F}><span class="autocomplete-icon icon-localities"></span>      			    <span class="autocomplete-text">${N}</span></li>`)}),b.forEach(function(j){const N=j.description.replace("日本、","");_.push(`<li class="autocomplete-item" data-type="place" data-place-id=${j.place_id}><span class="autocomplete-icon icon-localities"></span>      			    <span class="autocomplete-text">${N}</span></li>`)}),l){l.innerHTML=_.join(""),l.style.display="block";const j=l.querySelectorAll(".autocomplete-item");for(const N of j)N.addEventListener("click",function(){const E=this.querySelector(".autocomplete-text").textContent,F=this.getAttribute("data-place-id");if(F){const P={placeId:F,fields:["name","geometry"]};f.getDetails(P,function(x,y){if(y==window.google.maps.places.PlacesServiceStatus.OK){if(!x.geometry){console.log("Returned place contains no geometry");return}r(E,x.geometry.location.lat(),x.geometry.location.lng())}p.value=E,l.style.display="none"})}else r(E,Number(this.getAttribute("data-yext-lat")),Number(this.getAttribute("data-yext-lng"))),p.value=E,l.style.display="none"})}},p=a.current;console.log(p),p.addEventListener("input",i(function(){let h=this.value;console.log(h),h.replace('"','\\"').replace(/^\s+|\s+$/g,""),h!==""?m(h):(l.innerHTML="",l.style.display="none")},YEXT_PUBLIC_DEBOUNCE_TIME))};return o.jsxs("div",{className:"autocomplete-input-container",ref:n,children:[o.jsx("div",{className:"autocomplete-input",children:o.jsx("input",{id:"my-input-autocomplete",placeholder:"AutocompleteService",autoComplete:"off",role:"combobox",ref:a})}),o.jsx("ul",{className:"autocomplete-results",ref:s})]})},Zt=e=>{const{title:t,subTitle:n,placeholderText:s}=e,[a,r]=u.useState(!1),{mapRefCur:i}=W();return u.useEffect(()=>{console.log("useEffect"),i&&(r(!0),console.log("SearchBox:",i),console.log("window.google:",window.google))},[i]),o.jsxs("div",{className:"shadow-brand-shadow p-6",children:[o.jsx("h1",{className:"Heading--lead mb-4",children:t}),o.jsx("div",{className:"mb-2 text-brand-gray-400",children:n}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"relative w-full h-9",children:a&&o.jsx(Xt,{})}),o.jsx(pt,{className:"ml-4"})]})]})},Qt=e=>{const{result:t}=e,{rawData:n}=t,{address:s,hours:a,slug:r,name:i}=n,{relativePrefixToRoot:c}=He();return o.jsxs("div",{className:"LocatorCard",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(wt,{className:"Link--underlineInverse text-brand-primary",href:r?c+r:"",children:o.jsx("h3",{className:"Heading Heading--sub pb-2 sm:pb-4",children:i})}),o.jsx(Pe,{...e,className:"hidden sm:flex"})]}),a&&o.jsx("div",{className:"pb-2 sm:pb-4",children:o.jsx(St,{hours:a})}),o.jsx("div",{children:s.region+s.city+s.line1}),o.jsx(Pe,{...e,className:"sm:hidden"})]})},Pe=e=>{const{className:t,result:n,useKilometers:s=!0}=e,{distanceFromFilter:a}=n;return a?o.jsx("div",{className:G("whitespace-nowrap pt-2 sm:pt-0",t),children:`${en(a,s)} ${s?"km":"mi"}`}):null};function en(e,t){return t?(e/1e3).toFixed(2):(e/1609.344).toFixed(2)}function tn(e){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}}]})(e)}function nn(e){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}const sn=()=>{const e=q(r=>r),{relativePrefixToRoot:t}=He(),{results:n}=W(),s=u.useMemo(()=>an(e,n.length),[e,n.length]),a=o.jsxs("span",{children:["Use our locator to find a location near you or"," ",o.jsx("a",{href:t+"index.html",className:"Link--underline",children:"browse our directory"}),"."]});return o.jsx("div",{className:"mr-4",children:e.query.queryId?s:a})};function an(e,t){var s;let n="";if((s=e.filters.static)!=null&&s.length){const a=e.filters.static.find(r=>r.selected&&r.filter.kind==="fieldValue"&&ht(r.filter)&&r.displayName)??null;a!=null&&a.displayName&&(n=a.displayName)}return n?t===0?`No locations found near "${n}".`:t===1?`${t} location near "${n}".`:`${t} locations near "${n}".`:t===0?"No locations found.":t===1?`${t} location found.`:`${t} locations found.`}function Ge(e={}){const t=e;return t.matcher===K.Between&&ze(t.value)}function ze(e){return typeof e=="object"&&!!e&&("start"in e||"end"in e)}function rn(e){return e.options.length>0&&typeof e.options[0].value=="string"}function qe(e){return e.options.length>0&&e.options.some(t=>Ge(t))}function on(e,t){return!(e.fieldId!==t.fieldId||e.matcher!==t.matcher||JSON.stringify(e.value)!==JSON.stringify(t.value))}function Ke(e,t){return t.find(n=>{const{displayName:s,...a}=n;return on(a,e)})}function ln(e,t){const n=ke(e),s=ke(t);return{...n!==void 0&&{start:{matcher:K.GreaterThanOrEqualTo,value:n}},...s!==void 0&&{end:{matcher:K.LessThanOrEqualTo,value:s}}}}function ke(e){const t=parseFloat(e);if(!isNaN(t))return t}function We(e,t){var s,a,r;const n=(r=(a=(s=e.state)==null?void 0:s.filters)==null?void 0:a.static)==null?void 0:r.filter(i=>Ge(i)&&i.selected===!0&&(!t||t.has(i.fieldId)));n==null||n.forEach(i=>{e.setFilterOption({...i,selected:!1})})}function cn(e){var n;const t=((n=e.state.filters.facets)==null?void 0:n.filter(s=>qe(s)&&s.options.some(a=>a.selected)))??[];return new Set(t.map(s=>s.fieldId))}function un(e){return e.map(t=>{const{filter:{kind:n,...s},...a}=t;if(n==="fieldValue")return{...a,...s}}).filter(t=>!!t)}async function pe(e){const t=e.state.meta.searchType===jt.Vertical;try{t?e.executeVerticalQuery():e.executeUniversalQuery()}catch(n){console.error(`Error occured executing a ${t?"vertical":"universal"} search.
`,n)}}const Ye=u.createContext(null);function Y(){const e=u.useContext(Ye);if(e===null)throw new Error("Tried to use FiltersContext when none exists.");return e}function dn({children:e,className:t="w-full",searchOnChange:n=!0}){const s=M(),a=q(l=>l.filters.facets),r=u.useMemo(()=>a??[],[a]),i=u.useMemo(()=>r.flatMap(l=>l.options.map(d=>({fieldId:l.fieldId,value:d.value,matcher:d.matcher,selected:d.selected,displayName:d.displayName}))),[r]),c=u.useMemo(()=>({selectFilter(l){if(typeof l.value=="object"&&!ze(l.value)){console.error("Facets only support string, number, boolean, and NumberRangeValue. Found the following object value instead:",l.value);return}const d={matcher:l.matcher,value:l.value};s.setFacetOption(l.fieldId,d,l.selected)},applyFilters(){n&&(s.setOffset(0),We(s,cn(s)),pe(s))},filters:i}),[s,i,n]);return o.jsx("div",{className:t,children:o.jsx(Ye.Provider,{value:c,children:e==null?void 0:e(r)})})}const Je=u.createContext(null);function J(){const e=u.useContext(Je);if(e===null)throw new Error("Tried to use FilterGroupContext when none exists.");return e}/**
  * @reach/utils v0.18.0
  *
  * Copyright (c) 2018-2022, React Training LLC
  *
  * This source code is licensed under the MIT license found in the
  * LICENSE.md file in the root directory of this source tree.
  *
  * @license MIT
  */function fn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var pn=fn()?u.useLayoutEffect:u.useEffect,ce=!1,hn=0;function Re(){return++hn}var Te=ft.useId;function mn(e){if(Te!==void 0){let a=Te();return e??a}let t=e??(ce?Re():null),[n,s]=u.useState(t);return pn(()=>{n===null&&s(Re())},[]),u.useEffect(()=>{ce===!1&&(ce=!0)},[]),e??n??void 0}const xn={label:"text-neutral text-sm font-normal cursor-pointer",label___disabled:"opacity-50 cursor-not-allowed",input:"w-3.5 h-3.5 form-checkbox cursor-pointer border border-gray-300 rounded-sm text-primary focus:ring-primary",input___disabled:"border-gray-200 bg-gray-50 cursor-not-allowed",container:"flex items-center",optionContainer:"flex items-center space-x-3 peer",tooltipContainer:"invisible peer-hover:visible relative -right-5 -top-5",tooltip:"absolute z-10 left-0 -top-0.5 whitespace-nowrap rounded shadow-lg p-3 text-sm bg-neutral-dark text-white"};function gn(e){const{fieldId:t,isOptionsDisabled:n}=J(),{value:s,matcher:a=K.Equals,selectedByDefault:r=!1,displayName:i=e.value,resultsCount:c}=e,l=xn,d=mn(),{selectFilter:f,filters:m,applyFilters:g}=Y(),p=u.useCallback(F=>{f({matcher:a,fieldId:t,value:s,displayName:typeof i=="string"?i:void 0,selected:F}),g()},[g,t,i,f,s,a]),v=u.useCallback(F=>{p(F.target.checked)},[p]),h=u.useMemo(()=>({fieldId:t,matcher:a,value:s}),[t,s,a]),b=Ke(h,m);u.useEffect(()=>{!b&&r&&f({...h,displayName:typeof i=="string"?i:void 0,selected:!0})},[i,f,r,b,h]);const _=b?b.selected:!1,j=c?`${i} (${c})`:i,N=G(l.input,{[l.input___disabled]:n}),E=G(l.label,{[l.label___disabled]:n});return o.jsxs("div",{className:l.container,children:[o.jsxs("div",{className:l.optionContainer,children:[o.jsx("input",{type:"checkbox",id:d,checked:_,className:N,onChange:v,disabled:n}),o.jsx("label",{className:E,htmlFor:d,children:j})]}),n&&o.jsx("div",{className:l.tooltipContainer,children:o.jsx("div",{className:l.tooltip,children:"Clear the range to select options."})})]})}function Xe(e){const{className:t="space-y-3",children:n}=e,{getCollapseProps:s}=J();return o.jsx("div",{className:t,...s(),children:n})}function vn(e){const{className:t="text-sm form-input bg-white h-9 w-full outline-none p-2 mb-2 rounded-md border border-gray-300 focus:ring-primary focus:ring-0 text-neutral-dark placeholder:text-neutral",placeholder:n="Search here..."}=e,{searchValue:s,setSearchValue:a}=J(),r=u.useCallback(i=>{a(i.target.value)},[a]);return o.jsx("input",{className:t,type:"text",placeholder:n,value:s,onChange:r})}function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$.apply(this,arguments)}function ue(e,t){if(e==null)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)t.indexOf(n=r[s])>=0||(a[n]=e[n]);return a}var V=function(){};function de(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}var Ae=function(){var e=arguments;return function(){var t=arguments;return[].slice.call(e).forEach(function(n){return n&&n.apply(void 0,[].slice.call(t))})}};function yn(e,t){if(e!=null)if(typeof e=="function")e(t);else try{e.current=t}catch{throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}var bn=typeof window<"u"?u.useLayoutEffect:u.useEffect,fe=!1,Cn=0,Le=function(){return++Cn},wn=["duration","easing","collapseStyles","expandStyles","onExpandStart","onExpandEnd","onCollapseStart","onCollapseEnd","isExpanded","defaultExpanded","hasDisabledAnimation"],Sn=["disabled","onClick"],jn=["style","onTransitionEnd","refKey"];function Nn(e){var t,n,s=e===void 0?{}:e,a=s.duration,r=s.easing,i=r===void 0?"cubic-bezier(0.4, 0, 0.2, 1)":r,c=s.collapseStyles,l=c===void 0?{}:c,d=s.expandStyles,f=d===void 0?{}:d,m=s.onExpandStart,g=m===void 0?V:m,p=s.onExpandEnd,v=p===void 0?V:p,h=s.onCollapseStart,b=h===void 0?V:h,_=s.onCollapseEnd,j=_===void 0?V:_,N=s.isExpanded,E=s.defaultExpanded,F=E!==void 0&&E,P=s.hasDisabledAnimation,x=P!==void 0&&P,y=ue(s,wn),I=function(w,R){var A=u.useState(R||!1),O=A[0],B=A[1],D=u.useRef(w!=null),Q=D.current?w:O,z=u.useCallback(function(ee){D.current||B(ee)},[]);return u.useEffect(function(){D.current&&w==null,!D.current&&w!=null},[w]),[Q,z]}(N,F),S=I[0],k=I[1],C=function(w){var R=fe?Le():null,A=u.useState(R),O=A[0],B=A[1];return bn(function(){O===null&&B(Le())},[]),u.useEffect(function(){fe===!1&&(fe=!0)},[]),O!=null?String(O):void 0}(),T=u.useRef(null);t=T,n=function(w){},u.useEffect(function(){n(t)},[t]);var L,se,ae,X=(y.collapsedHeight||0)+"px",Ce={display:X==="0px"?"none":"block",height:X,overflow:"hidden"},we=u.useState(S?{}:Ce),re=we[0],at=we[1],oe=function(w){yt.flushSync(function(){at(w)})},Z=function(w){oe(function(R){return $({},R,w)})};function Se(w){if(x)return{};var R=a||function(A){if(!A||typeof A=="string")return 0;var O=A/36;return Math.round(10*(4+15*Math.pow(O,.25)+O/5))}(w);return{transition:"height "+R+"ms "+i}}L=function(){requestAnimationFrame(S?function(){g(),Z($({},f,{willChange:"height",display:"block",overflow:"hidden"})),requestAnimationFrame(function(){var w=de(T);Z($({},Se(w),{height:w}))})}:function(){b();var w=de(T);Z($({},l,Se(w),{willChange:"height",height:w})),requestAnimationFrame(function(){Z({height:X,overflow:"hidden"})})})},se=[S,X],ae=u.useRef(!0),u.useEffect(function(){if(!ae.current)return L();ae.current=!1},se);var rt=function(w){if(w.target===T.current&&w.propertyName==="height")if(S){var R=de(T);R===re.height?oe({}):Z({height:R}),v()}else re.height===X&&(oe(Ce),j())};return{getToggleProps:function(w){var R=w===void 0?{}:w,A=R.disabled,O=A!==void 0&&A,B=R.onClick,D=B===void 0?V:B,Q=ue(R,Sn);return $({type:"button",role:"button",id:"react-collapsed-toggle-"+C,"aria-controls":"react-collapsed-panel-"+C,"aria-expanded":S,tabIndex:0,disabled:O},Q,{onClick:O?V:Ae(D,function(){return k(function(z){return!z})})})},getCollapseProps:function(w){var R,A=w===void 0?{}:w,O=A.style,B=O===void 0?{}:O,D=A.onTransitionEnd,Q=D===void 0?V:D,z=A.refKey,ee=z===void 0?"ref":z,je=ue(A,jn);return $({id:"react-collapsed-panel-"+C,"aria-hidden":!S},je,((R={})[ee]=function(){var Ne=[].slice.call(arguments);return Ne.every(function(ie){return ie==null})?null:function(ie){Ne.forEach(function(ot){yn(ot,ie)})}}(T,je[ee]),R.onTransitionEnd=Ae(rt,Q),R.style=$({boxSizing:"border-box"},B,re),R))},isExpanded:S,setExpanded:k}}function Ze(e){const{children:t,defaultExpanded:n=!0,fieldId:s}=e,[a,r]=u.useState(""),[i,c]=u.useState(!1),{getCollapseProps:l,getToggleProps:d,isExpanded:f}=Nn({defaultExpanded:n}),m=u.useMemo(()=>({fieldId:s,searchValue:a,setSearchValue:r,getCollapseProps:l,getToggleProps:d,isExpanded:f,isOptionsDisabled:i,setIsOptionsDisabled:c}),[s,l,d,f,a,i]);return o.jsx(Je.Provider,{value:m,children:t})}function In({className:e}){return o.jsx("svg",{viewBox:"0 0 12 8",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{d:"M1.33341 6.5L6.00008 1.83333L10.6667 6.5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}const Qe={label:"text-neutral-dark text-sm font-medium text-left"};function En({label:e}){const{isExpanded:t,getToggleProps:n}=J(),s=G("w-3 text-gray-400",{"transform rotate-180":!t});return o.jsxs("button",{className:"w-full flex justify-between items-center mb-4",...n(),children:[o.jsx("div",{className:Qe.label,children:e}),o.jsx(In,{className:s})]})}const et=mt({classGroups:{form:["input","checkbox","textarea","select","multiselect","radio"].map(e=>"form-"+e)}});function tt({label:e,customCssClasses:t,collapsible:n=!0}){const s=u.useMemo(()=>({label:t==null?void 0:t.titleLabel}),[t]);return o.jsx(u.Fragment,{children:n?o.jsx(En,{label:e,customCssClasses:s}):e&&o.jsx("div",{className:et("mb-4",Qe.label,s.label),children:e})})}function nt({fieldId:e,filterOptions:t,title:n,collapsible:s=!0,defaultExpanded:a=!0,searchable:r,customCssClasses:i={},showMoreLimit:c=t.length,children:l}){return o.jsxs(Ze,{fieldId:e,defaultExpanded:!s||a,children:[o.jsx(tt,{label:n,customCssClasses:i,collapsible:s}),o.jsxs(Xe,{children:[r&&o.jsx(vn,{}),o.jsx(Fn,{filterOptions:t,showMoreLimit:c}),l]})]})}function Fn({filterOptions:e,showMoreLimit:t}){const n=xt(),{searchValue:s}=J(),a=d=>n.isCloseMatch(d.displayName||d.value.toString(),s);let r=e.filter(a).map(d=>u.createElement(gn,{...d,key:d.displayName||d.value.toString()}));const i=r.length>t,[c,l]=u.useState(!i);return r=r.slice(0,c?r.length:t),o.jsxs(o.Fragment,{children:[r,i&&o.jsx("button",{className:"text-primary py-1 text-sm",onClick:()=>l(!c),children:c?"Show Less":"Show More"})]})}function _n({fieldId:e,label:t,transformOptions:n,facet:s,showMoreLimit:a=10,showOptionCounts:r=!0,...i}){const c=s.options||[],l=n?n(c)||[]:c;return o.jsx(nt,{fieldId:e,filterOptions:l.map(d=>r?{...d,resultsCount:d.count}:d),title:t||s.displayName,showMoreLimit:a,searchable:(s==null?void 0:s.options.length)>a,...i})}function Pn({className:e}){return o.jsx("div",{className:et("w-full h-px bg-gray-200 my-4",e)})}function kn(){return o.jsx("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M9.99955 7V9M9.99955 13H10.0095M3.07134 17H16.9277C18.4673 17 19.4296 15.3333 18.6598 14L11.7316 2C10.9618 0.666667 9.0373 0.666667 8.2675 2L1.33929 14C0.569492 15.3333 1.53174 17 3.07134 17Z",stroke:"#B91C1C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}const Rn={rangeInputContainer:"flex flex-col",input:"w-full h-9 form-input cursor-pointer border rounded-md focus:ring-0 text-neutral-dark text-sm text-right appearance-none leading-9",input___withPrefix:"pl-[2.5rem]",input___withoutPrefix:"px-2",input___disabled:"bg-gray-50 placeholder:text-neutral-light cursor-not-allowed",input___enabled:"placeholder:text-neutral",input___valid:"border-gray-300 focus:border-primary",input___invalid:"border-red-700 focus:border-red-700",inputContainer:"relative",inputRowContainer:"flex flex-row items-center space-x-3 group",buttonsContainer:"flex flex-row items-center justify-between pt-2",inputPrefix:"absolute left-2 top-2 text-sm",inputPrefix___disabled:"text-neutral-light cursor-not-allowed",inputPrefix___enabled:"text-neutral",applyButton:"text-sm text-primary font-medium",clearButton:"text-sm text-neutral font-medium",tooltipContainer:"invisible group-hover:visible relative -top-6",tooltip:"absolute z-10 left-0 whitespace-nowrap rounded shadow-lg p-3 text-sm bg-neutral-dark text-white",invalidMessage:"pl-3 text-sm text-red-700",invalidRowContainer:"pt-2 flex flex-row items-center"};function Tn(e){const{filters:t}=Y(),{fieldId:n,setIsOptionsDisabled:s}=J(),{getFilterDisplayName:a=An,inputPrefix:r}=e,i=Rn,c=M(),[l,d]=u.useState(""),[f,m]=u.useState(""),g=q(C=>C.filters.static),p=u.useMemo(()=>un(g??[]),[g]),v=t.some(C=>C.selected&&C.fieldId===n),h=u.useMemo(()=>({kind:"fieldValue",fieldId:n,matcher:K.Between,value:ln(l,f)}),[n,f,l]),b=Ln(h.value),_=Ke(h,p),j=(_==null?void 0:_.selected)===!0,N=!!(l||f),E=N&&!j;u.useEffect(()=>{s(N)},[N,s]);const F=u.useCallback(C=>{var L;const T=(L=C==null?void 0:C.target)==null?void 0:L.value;Oe(T)&&d(T)},[]),P=u.useCallback(C=>{var L;const T=(L=C==null?void 0:C.target)==null?void 0:L.value;Oe(T)&&m(T)},[]),x=u.useCallback(()=>{if(!h.value.start&&!h.value.end||!b)return;const C=a(h.value);We(c,new Set([n])),c.setFilterOption({filter:h,selected:!0,displayName:C}),c.setOffset(0),pe(c)},[c,n,a,b,h]),y=u.useCallback(()=>{const C=a(h.value);c.setFilterOption({filter:h,selected:!1,displayName:C}),d(""),m(""),c.setOffset(0),pe(c)},[c,a,h]),I=G(i.input,{[i.input___withPrefix]:!!r,[i.input___withoutPrefix]:!r,[i.input___disabled]:v,[i.input___enabled]:!v,[i.input___invalid]:!b,[i.input___valid]:b}),S=G(i.inputPrefix,{[i.inputPrefix___disabled]:v,[i.inputPrefix___enabled]:!v});function k(C,T,L){return o.jsxs("div",{className:i.inputContainer,children:[r&&o.jsx("span",{className:S,"aria-hidden":"true",children:r}),o.jsx("input",{type:"text",inputMode:"decimal",value:C,placeholder:L,disabled:v,className:I,onChange:T})]})}return o.jsxs("div",{className:i.rangeInputContainer,children:[o.jsxs("div",{className:i.inputRowContainer,children:[k(l,F,"Min"),o.jsx("div",{className:"w-2.5 text-sm text-neutral",children:"-"}),k(f,P,"Max"),v&&o.jsx("div",{className:i.tooltipContainer,children:o.jsx("div",{className:i.tooltip,children:"Unselect an option to enter in a range."})})]}),!b&&o.jsxs("div",{className:i.invalidRowContainer,children:[o.jsx(kn,{}),o.jsx("div",{className:i.invalidMessage,children:"Invalid range"})]}),N&&o.jsxs("div",{className:i.buttonsContainer,children:[o.jsx("button",{className:i.clearButton,onClick:y,children:"Clear min and max"}),E&&o.jsx("button",{className:i.applyButton,onClick:x,children:"Apply"})]})]})}function An(e){const t=e.start,n=e.end;return t&&n?`${t.value} - ${n.value}`:t&&!n?`Over ${t.value}`:n&&!t?`Up to ${n.value}`:""}function Oe(e){return new RegExp(/^\d*\.?\d*$/).test(e)}function Ln(e){return e.start&&e.end?e.start.value<=e.end.value:!0}const On=o.jsx(o.Fragment,{children:"$"});function Mn({fieldId:e,label:t,transformOptions:n,getFilterDisplayName:s,facet:a,showMoreLimit:r=10,showOptionCounts:i=!1,inputPrefix:c=On,...l}){const d=a.options||[],f=n?n(d)||[]:d;return o.jsx(nt,{fieldId:e,filterOptions:f.map(m=>i?{...m,resultsCount:m.count}:m),title:t||a.displayName,showMoreLimit:r,searchable:(a==null?void 0:a.options.length)>r,...l,children:o.jsx(Tn,{getFilterDisplayName:s,inputPrefix:c})})}function Dn(e,t){return u.useMemo(()=>$n(e,t),[t,e])}function $n(e,t){const n=(e==null?void 0:e.options.map(a=>{const r=a.displayName.split(t).map(i=>i.trim());return{...a,displayNameTokens:r}}).sort((a,r)=>a.displayNameTokens.length-r.displayNameTokens.length))||[],s={};return n.forEach(a=>{const{displayNameTokens:r,displayName:i}=a;let c=s,l;for(const f of r.slice(0,-1)){if(!(f in c)){console.error(`Error parsing hierarchical facet option "${i}" at token "${f}". Current tree:`,JSON.stringify(s));return}a.selected&&(c[f].hasSelectedChild=!0),l=c[f],c=c[f].childTree}const d=r[r.length-1];c[d]={selected:a.selected,displayNameTokens:r,lastDisplayNameToken:d,facetOption:{value:a.value,matcher:a.matcher},hasSelectedChild:!1,childTree:{},parentNode:l}}),s}const Bn=">",H={treeContainer:"flex flex-col items-start",allCategoriesOption___active:"font-semibold mb-2 text-sm",allCategoriesOption___inactive:"mb-2 text-sm",availableOption__active:"font-semibold ml-4 mb-2 text-sm",availableOption__inactive:"ml-4 mb-2 text-sm",parentCategory:"mb-2 text-sm",currentCategory:"font-semibold mb-2 text-sm",showMoreButton:"ml-4 text-sm font-medium text-primary"};function Hn({facet:e,delimiter:t=Bn,showMoreLimit:n=4}){const s=Dn(e,t),[a,r]=u.useState(!1),i=u.useCallback(()=>r(!1),[]),c=u.useCallback(()=>{r(!a)},[a]);function l(){let p=s;const v=[d()];for(;p;){const h=Object.values(p),b=h.find(E=>E.selected),_=b&&Object.values(b.childTree).length===0,j=h.find(E=>E.hasSelectedChild);if(!b&&!j||_){v.push(...f(h)),h.length>n&&v.push(m());break}const N=b??j;if(!N)break;v.push(g(N,e.fieldId)),p=N.childTree}return v}function d(){return o.jsx(Vn,{activeClassName:H.allCategoriesOption___active,inactiveClassName:H.allCategoriesOption___inactive,facet:e,resetShowMore:i},"_AllCategories")}function f(p){return(a?p:p.slice(0,n)).map(h=>o.jsx(Un,{activeClassName:H.availableOption__active,inactiveClassName:H.availableOption__inactive,fieldId:e.fieldId,currentNode:h,resetShowMore:i,siblingNodes:p.filter(b=>b!==h)},h.lastDisplayNameToken))}function m(){return o.jsx(qn,{className:H.showMoreButton,isShowingMore:a,toggleShowMore:c},"_ShowMoreButton")}function g(p,v){const h={key:p.lastDisplayNameToken,resetShowMore:i,selectedNode:p,fieldId:v};return p.hasSelectedChild?o.jsx(Gn,{className:H.parentCategory,...h}):o.jsx(zn,{className:H.currentCategory,...h})}return o.jsx("div",{className:H.treeContainer,children:l()})}function Vn({facet:e,inactiveClassName:t,activeClassName:n,resetShowMore:s}){const{applyFilters:a,selectFilter:r}=Y(),i=u.useCallback(()=>{e.options.filter(c=>c.selected).forEach(c=>r({...c,fieldId:e.fieldId,selected:!1})),a(),s()},[a,e.fieldId,e.options,s,r]);return e.options.find(c=>c.selected)?o.jsx("button",{className:t,onClick:i,children:"All Categories /"}):o.jsx("div",{className:n,children:"All Categories"})}function Un(e){var p;const{fieldId:t,currentNode:n,activeClassName:s,inactiveClassName:a,resetShowMore:r,siblingNodes:i}=e,{applyFilters:c,selectFilter:l}=Y(),{selected:d,lastDisplayNameToken:f,facetOption:m}=n,g=u.useCallback(()=>{var h;i.filter(b=>b.selected).forEach(b=>l({...b.facetOption,selected:!1,fieldId:t})),l({...m,selected:!d,fieldId:t});const v=(h=n.parentNode)==null?void 0:h.facetOption;v&&l({...v,selected:d,fieldId:t}),c(),r()},[c,(p=n.parentNode)==null?void 0:p.facetOption,m,t,r,l,d,i]);return o.jsx("button",{className:d?s:a,onClick:g,children:f})}function Gn({fieldId:e,selectedNode:t,className:n,resetShowMore:s}){const{applyFilters:a,selectFilter:r}=Y(),i=u.useCallback(l=>{const d=l.childTree;Object.values(d).forEach(f=>{r({...f.facetOption,selected:!1,fieldId:e}),i(f)})},[e,r]),c=u.useCallback(()=>{r({...t.facetOption,selected:!0,fieldId:e}),i(t),a(),s()},[a,i,e,s,r,t]);return o.jsx("button",{className:n,onClick:c,children:t.lastDisplayNameToken+" /"})}function zn({fieldId:e,selectedNode:t,className:n,resetShowMore:s}){var c;const{applyFilters:a,selectFilter:r}=Y(),i=u.useCallback(()=>{var d;r({...t.facetOption,selected:!1,fieldId:e});const l=(d=t.parentNode)==null?void 0:d.facetOption;l&&r({...l,selected:!0,fieldId:e}),a(),s()},[a,e,s,r,t.facetOption,(c=t.parentNode)==null?void 0:c.facetOption]);return o.jsx("button",{className:n,onClick:i,children:t.lastDisplayNameToken})}function qn({className:e,isShowingMore:t,toggleShowMore:n}){return o.jsx("button",{className:e,onClick:n,children:t?"Show less":"Show more"})}function Kn({fieldId:e,label:t,transformOptions:n,delimiter:s,facet:a,collapsible:r=!0,defaultExpanded:i=!0,showMoreLimit:c=4}){const l=a.options||[],d=n?n(l)||[]:l;return o.jsxs(Ze,{fieldId:e,defaultExpanded:!r||i,children:[o.jsx(tt,{label:t||a.displayName,collapsible:r}),o.jsx(Xe,{children:o.jsx(Hn,{facet:{...a,options:d},delimiter:s,showMoreLimit:c})})]})}function Wn(e){const{searchOnChange:t,onlyRenderChildren:n=!1,children:s,hierarchicalFieldIds:a=[],excludedFieldIds:r=[],collapsible:i,showOptionCounts:c}=e,l=new Map,d=[];return s&&(Array.isArray(s)?s:[s]).filter(f=>{var m;return(m=f==null?void 0:f.props)==null?void 0:m.fieldId}).forEach(f=>{l.set(f.props.fieldId,f),d.push(f.props.fieldId)}),o.jsx("div",{children:o.jsx(dn,{searchOnChange:t,children:f=>{if(!(f!=null&&f.length))return;n||f.forEach(g=>{d.includes(g.fieldId)||d.push(g.fieldId)});const m=new Map;return f.forEach(g=>m.set(g.fieldId,g)),d.filter(g=>!r.includes(g)&&m.get(g).options.length>0&&(!n||l.has(g))).map((g,p)=>{const v=m.get(g);return o.jsxs(u.Fragment,{children:[o.jsx(Yn,{facet:v,hierarchicalFieldIds:a,collapsible:i,showOptionCounts:c}),p<f.length-1&&o.jsx(Pn,{})]},v.fieldId)})}})})}function Yn({facet:e,hierarchicalFieldIds:t,collapsible:n,showOptionCounts:s}){const a={fieldId:e.fieldId,label:e.displayName,collapsible:n,showOptionCounts:s};switch(Jn(e,t)){case"NUMERICAL":return o.jsx(Mn,{facet:e,...a});case"HIERARCHICAL":return o.jsx(Kn,{facet:e,...a});case"STANDARD":default:return o.jsx(_n,{facet:e,...a})}}function Jn(e,t=[]){return t.includes(e.fieldId)?"HIERARCHICAL":rn(e)?"STANDARD":qe(e)?"NUMERICAL":"STANDARD"}const st=()=>{var s;const t=(s=M().state.filters.facets)==null?void 0:s.filter(a=>a.options.filter(r=>r.selected).length),n=t==null?void 0:t.map(a=>a.options.filter(r=>r.selected).map((r,i)=>o.jsx(Xn,{facetFieldId:a.fieldId,option:r},i)));return n!=null&&n.length?o.jsx("div",{className:"mb-4 sm:mb-0 sm:mt-4",children:o.jsx("div",{className:"flex overflow-x-auto -mx-1.5 pb-3 -mb-3 -mr-4 sm:mr-0",children:n})}):null},Xn=e=>{const t=M(),n=()=>{t.setFacetOption(e.facetFieldId,e.option,!1),he(t)};return o.jsxs("button",{className:"bg-brand-gray-100 hover:bg-brand-gray-200 rounded-3xl p-2.5 text-brand-primary text-sm flex items-center mx-1.5 whitespace-nowrap",onClick:n,children:[o.jsx(nn,{height:8,width:8,className:"mr-2"}),o.jsx("span",{children:e.option.displayName})]})},Zn=e=>{const t=me("sm"),n=M(),s=n.state.filters.facets,a=()=>{n.resetFacets(),he(n),e.setFiltersOpen(!1)};return o.jsxs("div",{className:"Locator-facetsModal",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-brand-primary",children:"Refine Your Search"}),o.jsx("button",{className:"ml-auto",onClick:()=>e.setFiltersOpen(!1),children:o.jsx(Nt,{className:"text-brand-primary"})})]}),!t&&o.jsx(st,{}),o.jsx("div",{className:"h-px bg-brand-gray-300 w-screen -mx-4 mb-4 sm:mx-0 sm:w-full"}),o.jsx("div",{className:"overflow-y-auto",children:o.jsx(Wn,{collapsible:!1,searchOnChange:!0,showOptionCounts:!0})}),o.jsx("div",{className:"text-center mt-6",children:o.jsx("button",{className:"Link Link--primary disabled:text-brand-gray-400",onClick:a,disabled:!(s!=null&&s.filter(r=>r.options.filter(i=>i.selected).length).length),children:"Clear All"})})]})},Qn=()=>{const e=me("sm"),[t,n]=u.useState(!1);return u.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(!1)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[]),o.jsxs("div",{className:"shadow-brand-shadow py-4 px-6",children:[t&&!e&&o.jsx("div",{className:"fixed top-0 left-0 h-screen w-screen opacity-30 bg-black z-10",onClick:()=>n(!1)}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(sn,{}),o.jsx(es,{filtersOpen:t,setFiltersOpen:n})]}),e&&o.jsx(st,{}),t&&o.jsx(Zn,{setFiltersOpen:n})]})},es=e=>{const n=M().state.filters.facets,s=!!(n!=null&&n.filter(r=>r.options.length).length),a=n==null?void 0:n.map(r=>r.options.filter(i=>i.selected).length).reduce((r,i)=>r+i,0);return s?o.jsxs("button",{className:"flex items-center ml-auto",onClick:()=>e.setFiltersOpen(!e.filtersOpen),children:[o.jsx("span",{className:"text-brand-primary mr-2.5 whitespace-nowrap",children:`Filters ${a?`(${a})`:""}`}),o.jsx(tn,{className:"text-brand-primary"})]}):null},ts=e=>{const{CardComponent:t}=e,{results:n}=W();return o.jsx("div",{className:"ResultList",children:n==null?void 0:n.map(s=>o.jsx(ns,{CardComponent:t,result:s},s.id||s.index))})};function ns(e){const{CardComponent:t,result:n}=e,{selectedId:s,setSelectedId:a,hoveredId:r,setHoveredId:i,focusedId:c,setFocusedId:l}=W(),d=u.useRef(null);return u.useEffect(()=>{var f;s===n.id&&((f=d.current)==null||f.scrollIntoView({behavior:"smooth",block:"nearest"}))},[s,n.id]),o.jsx("div",{ref:d,className:G("ResultList-item",{"is-selected":s===n.id},{"is-hovered":r===n.id||c===n.id}),onClick:()=>a(n.id??""),onFocus:()=>l(n.id??""),onBlur:()=>l(""),onMouseEnter:()=>i(n.id??""),onMouseLeave:()=>i(""),children:o.jsx(t,{result:n})})}const ss=e=>{const{selectedId:t,setSelectedId:n,hoveredId:s,setHoveredId:a,focusedId:r,setFocusedId:i}=W(),{coordinate:c,id:l,index:d}=e,f=l===t,m=l===r,g=l===s,p=it();return u.useEffect(()=>{t===l&&(p.getBounds().contains(new CoordinateClass(c))||p.setCenter(c,!0))},[t,l,c,p]),o.jsx(lt,{coordinate:c,id:l,onClick:n,onFocus:(v,h)=>i(v?h:""),onHover:(v,h)=>a(v?h:""),zIndex:f?1:g||m?2:0,children:o.jsx(as,{backgroundColor:f||g||m?"#0C5ECB":"#0f70f0",index:d,height:f?57:49,width:f?33:29})})},as=e=>{const{backgroundColor:t,height:n,index:s,textColor:a,width:r}=e;return o.jsxs("svg",{fill:"none",height:n,viewBox:"0 0 29 49",width:r,xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"m14.5.5c4 0 7.5028 1.49535 10.0037 3.99628 2.501 2.50093 3.9963 6.00372 3.9963 10.00372 0 4.3786-2.3969 7.7986-5.1195 11.7503-3.7142 5.391-8.0637 11.7263-8.3618 22.4575-1.3355-10.7312-5.68504-17.0665-9.39921-22.4575-2.72261-3.9517-5.11949-7.3717-5.11949-11.7503 0-4 1.49535-7.50279 3.99628-10.00372s6.00372-3.99628 10.00372-3.99628z",fill:t||"#0f70f0",stroke:"#000",strokeOpacity:".5"}),o.jsx("text",{x:"50%",y:"40%",fontSize:"14px",fontWeight:"bold",dominantBaseline:"middle",textAnchor:"middle",fill:a||"#FFFFFF",children:s})]})},rs=e=>{const{displayAllOnNoResults:t=!1,allResultsOnLoad:n=!1,placeholderText:s,subTitle:a,title:r,locale:i}=e,c=It(),[l,d]=u.useState(""),[f,m]=u.useState(""),[g,p]=u.useState(""),[v,h]=u.useState(null),b=u.useRef(null),_=M(),j=q(S=>S.searchStatus.isLoading);me("sm");const[N,E]=u.useState(!1),[F,P]=u.useState(!1),x=u.useCallback(()=>P(!0),[P]);zt(F,x),qt(F),Kt(),u.useEffect(()=>{d(""),m(""),p("")},[_.state.query.queryId]);const y=Yt(t,n,()=>{E(!0)}),I=()=>{b.current&&!v&&h(b.current)};return o.jsx(Jt,{value:{results:y,selectedId:l,setSelectedId:d,focusedId:f,setFocusedId:m,hoveredId:g,setHoveredId:p,mapRefCur:v,setMapRefCur:h},children:o.jsxs("div",{className:"Locator",children:[(!F||j||n&&!N)&&o.jsx(gt,{}),o.jsxs("div",{className:"Locator-content",children:[o.jsx(Zt,{title:r,subTitle:a,placeholderText:s}),o.jsx(Qn,{}),o.jsx(ts,{CardComponent:Qt})]}),o.jsx("div",{className:"Locator-map",children:o.jsx(ct,{provider:ut,bounds:y.map(S=>S.rawData.yextDisplayCoordinate),padding:{top:100,bottom:200,left:50,right:50},providerOptions:{language:"ja",region:"JP",autocomplete:!0},defaultCenter:{latitude:35.6798,longitude:139.771},defaultZoom:"5",className:"h-full",mapRef:b,panHandler:I,...c,children:y.map((S,k)=>o.jsx(ss,{coordinate:S.rawData.yextDisplayCoordinate,id:S.rawData.id,index:k+1},S.rawData.id))})})]})})},os=({data:e})=>{const{document:t}=e,{c_searchTitle:n,c_searchSubTitle:s,c_searchPlaceholderText:a,_site:r}=t,i=dt(),c=Ft(r.c_searchExperienceAPIKey??"",t.meta.locale,t.siteDomain);return r.c_searchExperienceAPIKey||console.error("Add the search experience API key to the Site Entity"),o.jsx(o.Fragment,{children:o.jsx(vt,{searcher:c,children:i.name==="browser"&&o.jsx(Gt,{children:o.jsx(rs,{title:n||"Find a Location",subTitle:s||"Search by city and state or ZIP code",placeholderText:a||"Search by city and state or ZIP code"})})})})},ps=e=>o.jsx(Et,{data:e,children:o.jsx(os,{data:e})});export{ps as S};
